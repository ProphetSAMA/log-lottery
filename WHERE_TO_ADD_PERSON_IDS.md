# 在哪里添加人员ID来实现对指定人做保底操作？

## 回答：在"全局配置" → "功能设置"中

### 具体位置

1. **打开应用** → 点击"全局配置"（或"Settings/Configuration"）
2. 在配置页面中找到 **"功能设置"（Ability Setting）** 区域
3. 确保 **"保底匹配"（Guaranteed Match）** 复选框已勾选
4. 在 **"保底人员编号"（Guaranteed Person IDs）** 输入框中输入人员编号

### 界面位置示意

```
全局配置页面
├── 数据设置 (Data Setting)
├── 文本设置 (Text Setting)
├── 布局设置 (Layout Setting)
├── 主题设置 (Theme Setting)
├── 图案设置 (Pattern Setting)
└── 功能设置 (Ability Setting)  ← 在这里！
    ├── 定时停止 (Timed Stop)
    ├── 播放中奖音乐 (Play Win Music)
    ├── ✅ 保底匹配 (Guaranteed Match)
    ├── 保底阈值 (Guaranteed Threshold): [5]
    └── 保底人员编号 (Guaranteed Person IDs): [U001,U002,U003]  ← 在这里输入！
```

## 输入格式

### 正确格式：
```
U001,U002,U003
```
或带空格也可以（系统会自动去除）：
```
U001, U002, U003
```

### 多个编号示例：
```
U001,U002,U003,U010,U020
```

## 注意事项

1. **使用人员的 uid（编号）**，不是 id 或 name
2. **多个编号用英文逗号分隔**
3. **编号必须在人员列表中存在**
4. **仅在第6次抽奖时生效**：全局抽奖5次后，第6次抽奖时这些人员才会被优先选中

## 工作原理

当您输入人员编号后，系统的抽奖逻辑如下：

### 抽奖1-5次
```
优先级 1️⃣: 自动保底人员（连续未中奖次数 >= 保底阈值）
         ↓
优先级 2️⃣: 随机抽取（从剩余人员中随机选择）
```

### 第6次抽奖（以及第12、18次...）
```
优先级 1️⃣: 手动指定的保底人员（您输入的编号）⭐ 仅第6次生效
         ↓
优先级 2️⃣: 自动保底人员（连续未中奖次数 >= 保底阈值）
         ↓
优先级 3️⃣: 随机抽取（从剩余人员中随机选择）
```

**重要**：手动保底人员只在每第6次抽奖时生效（第6、12、18、24次...）

## 实际使用案例

### 案例1：6次循环保底
需要让 U001 和 U005 这两个人在每第6次抽奖时必须中奖：

```
保底人员编号: U001,U005
```

结果：
- 第1-5次抽奖：正常抽奖或自动保底
- 第6次抽奖：U001 和 U005 优先中奖 ⭐
- 第7-11次抽奖：正常抽奖或自动保底
- 第12次抽奖：U001 和 U005 优先中奖 ⭐

### 案例2：补偿机制（需等待第6次）
想要补偿 U010、U020、U030：

```
保底人员编号: U010,U020,U030
```

这些人员会在抽奖计数到第6次时被优先选中。

### 案例3：结合自动保底
- 设置保底阈值：5次
- 设置保底人员编号：U001,U002

结果：
- 第1-5次：连续未中5次的人员自动保底
- 第6次：U001、U002优先，然后是连续未中5次的人员，最后随机抽取
- 第7-11次：连续未中5次的人员自动保底
- 第12次：U001、U002优先，然后是连续未中5次的人员，最后随机抽取

### 案例3：混合使用
- 保底阈值设为 5 次
- 手动保底 U001 和 U002

结果：
1. U001 和 U002 首先中奖（手动保底）
2. 连续未中 5 次的人接着中奖（自动保底）
3. 如果还有名额，从剩余人员中随机抽取

## 配置文件位置（开发者参考）

如果您需要查看或修改代码，相关文件位置：

- **UI 界面**：`src/views/Config/Global/FaceConfig/parts/AbilitySetting.vue`
- **配置存储**：`src/store/globalConfig.ts`
- **抽奖逻辑**：`src/views/Home/useViewModel.ts`
- **翻译文本**：
  - `src/locales/modules/table.ts`（标签）
  - `src/locales/modules/tooltip.ts`（提示）
  - `src/locales/modules/placeHolder.ts`（占位符）

## 测试

运行测试以验证功能：
```bash
npm test GuaranteedMatching
```

## 视频演示（如果需要）

1. 打开应用
2. 点击右上角的设置图标
3. 选择"全局配置"
4. 滚动到"功能设置"区域
5. 勾选"保底匹配"
6. 在"保底人员编号"输入框中输入：`U001,U002`
7. 返回主页进行抽奖
8. U001 和 U002 会优先被抽中

---

**总结**：您要找的输入位置就在"全局配置" → "功能设置" → "保底人员编号"输入框中！
